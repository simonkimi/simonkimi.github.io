let asciidoctor=require("asciidoctor")(),entities=require("entities"),cheerio=require("cheerio"),p=require("path"),fs=require("fs");function wrapContainer(e){return`<div class="asciidoc-container">${e}</div>`}function renderer(s,e){var r=asciidoctor.Extensions.create(),r=(r.includeProcessor(function(){this.handles(function(e){return!0}),this.process(function(e,r,t,i){var n=p.dirname(s.path),n=p.join(n,t),n=fs.readFileSync(n,"utf8");return r.pushInclude(n,t,t,1,i)})}),asciidoctor.convert(s.text,{doctype:"article",safe:"server",attributes:["source-highlighter=html-pipeline"],extension_registry:r}));let n=cheerio.load(wrapContainer(r),{decodeEntities:!1});return n("pre.highlight").each((e,r)=>{var t=r.childNodes[0],i=t.attribs["data-lang"],t=entities.decodeXML(n(t).text()),i=hexo.extend.highlight.exec(hexo.config.syntax_highlighter,{context:hexo,args:[t,{lang:i,lines_length:t.split("\n").length}]});n(r).replaceWith(i)}),n.html().replace(/{/g,"&#123;").replace(/}/g,"&#125;")}hexo.extend.renderer.register("ad","html",renderer,!0),hexo.extend.renderer.register("adoc","html",renderer,!0),hexo.extend.renderer.register("asciidoc","html",renderer,!0);let css=hexo.extend.helper.get("css").bind(hexo);hexo.extend.injector.register("body_end",()=>css("/css/asciidoc-renderer.css"));